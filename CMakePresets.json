{
  "version": 2,
  "cmakeMinimumRequired": {
    "major": 3,
    "minor": 12,
    "patch": 2
  },
  "configurePresets": [
    {
      "name": "Debug",
      "generator": "Unix Makefiles",
      "displayName": "Default Debug Config",
      "description": "Default build meant for Linux or Unix-like systems for debugging",
      "binaryDir": "${sourceDir}/cmake-cc-debug/",
      "cacheVariables": {
        "CMAKE_CXX_FLAGS": "--std=c++11 -Wall -Wno-reorder -DMPDP_DRAW -O0 -g"
      }
    },

    {
      "name": "Release",
      "generator": "Unix Makefiles",
      "displayName": "Default Release Config",
      "description": "Default build meant for Linux or Unix-like systems in release",
      "binaryDir": "${sourceDir}/cmake-cc-release/",
      "cacheVariables": {
        "CMAKE_CXX_FLAGS": "--std=c++11 -Wunknown-pragmas -O3"
      }
    },

    {
      "name": "GTEST",
      "generator": "Unix Makefiles",
      "displayName": "GTEST",
      "description": "Build meant for Linux or Unix-like systems testing with Google suite for testing",
      "binaryDir": "${sourceDir}/cmake-cc-GTEST/",
      "cacheVariables": {
        "TEST" : "GTEST",
        "CMAKE_CXX_FLAGS": "-O3 --std=c++11"
      }
    },

    {
      "name": "DebugCuda" ,
      "inherits": "Debug",
      "displayName": "CUDA Debug",
      "description": "Compile with CUDA support for debug",
      "binaryDir": "${sourceDir}/cmake-cu-debug/",
      "cacheVariables": {
        "CUDA_ON": "ON",
        "CUDA_FLAGS": "-O3 -std=c++11 -DCUDA_ON --default-stream per-thread --compiler-options=\"-Wall -Wno-reorder\"",
        "CUDA_ARCH": "72;75",
        "CUDA_SEP_COMP": "ON"
      }
    },

    {
      "name": "ReleaseCuda" ,
      "inherits": "Release",
      "displayName": "CUDA Release",
      "description": "Compile with CUDA support in release mode",
      "binaryDir": "${sourceDir}/cmake-cu-release/",
      "cacheVariables": {
        "CUDA_ON": "ON",
        "CUDA_FLAGS": "-O3 -std=c++11 -DCUDA_ON --default-stream per-thread",
        "CUDA_ARCH": "72;75",
        "CUDA_SEP_COMP": "ON"
      }
    },

    {
      "name": "ninja",
      "displayName": "Ninja",
      "description": "Ninja generator",
      "generator": "Ninja",
      "binaryDir": "${sourceDir}/build/",
      "cacheVariables": {
        "CMAKE_CXX_FLAGS": "/O3 /std=c++11 /Wall /Wno-reorder"
      }
    }
  ],
  "buildPresets": [
    {
      "name": "Release",
      "configurePreset": "Release"
    },
    {
      "name": "ReleaseCuda",
      "configurePreset": "ReleaseCuda"
    },

    {
      "name": "Debug",
      "configurePreset": "Debug",
      "jobs": 1
    },
    {
      "name": "DebugCuda",
      "configurePreset": "DebugCuda",
      "jobs": 1
    },

    {
      "name" : "GTEST",
      "configurePreset": "GTEST"
    }
  ],
  "testPresets": [
    {
      "name": "Release",
      "configurePreset": "Release",
      "output": {"outputOnFailure": true},
      "execution": {"noTestsAction": "error", "stopOnFailure": true}
    }
  ]
}
