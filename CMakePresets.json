{
  "version": 2,
  "cmakeMinimumRequired": {
    "major": 3,
    "minor": 12,
    "patch": 2
  },
  "configurePresets": [
    {
      "name": "Debug",
      "generator": "Unix Makefiles",
      "displayName": "Default Config",
      "description": "Default build meant for Linux or Unix-like systems",
      "binaryDir": "${sourceDir}/cmake-cc-debug/",
      "cacheVariables": {
        "CMAKE_CXX_FLAGS": "--std=c++11 -Wall -Wno-reorder"
      }
    },

    {
      "name": "Release",
      "generator": "Unix Makefiles",
      "displayName": "Default Config",
      "description": "Default build meant for Linux or Unix-like systems",
      "binaryDir": "${sourceDir}/cmake-cc-release/",
      "cacheVariables": {
        "CMAKE_CXX_FLAGS": "-O2 --std=c++11"
      }
    },

    {
      "name": "GTEST",
      "generator": "Unix Makefiles",
      "displayName": "GTEST",
      "description": "Build meant for Linux or Unix-like systems testing with Google suite for testing",
      "binaryDir": "${sourceDir}/cmake-cc-GTEST/",
      "cacheVariables": {
        "TEST" : "GTEST",
        "CMAKE_CXX_FLAGS": "-O2 --std=c++11"
      }
    },

    {
      "name": "CudaDebug" ,
      "inherits": "Debug",
      "displayName": "CUDA",
      "description": "Compile with CUDA support",
      "binaryDir": "${sourceDir}/cmake-cu-debug/",
      "cacheVariables": {
        "CUDA_ON": "ON",
        "CUDA_FLAGS": "-O2 -std=c++11 -DCUDA_ON --default-stream per-thread --compiler-options=\"-Wall -Wno-reorder\"",
        "CUDA_ARCH": "72;75",
        "CUDA_SEP_COMP": "ON"
      }
    },

    {
      "name": "CudaRelease" ,
      "inherits": "Release",
      "displayName": "CUDA",
      "description": "Compile with CUDA support",
      "binaryDir": "${sourceDir}/cmake-cu-release/",
      "cacheVariables": {
        "CUDA_ON": "ON",
        "CUDA_FLAGS": "-O2 -std=c++11 -DCUDA_ON --default-stream per-thread",
        "CUDA_ARCH": "72;75",
        "CUDA_SEP_COMP": "ON"
      }
    },

    {
      "name": "ninja",
      "displayName": "Ninja",
      "description": "Ninja generator",
      "generator": "Ninja",
      "binaryDir": "${sourceDir}/build/",
      "cacheVariables": {
        "CMAKE_CXX_FLAGS": "/O2 /std=c++11 /Wall /Wno-reorder"
      }
    }
  ],
  "buildPresets": [
    {
      "name": "Release",
      "configurePreset": "Release"
    },
    {
      "name": "CudaRelease",
      "configurePreset": "CudaRelease"
    },

    {
      "name": "Debug",
      "configurePreset": "Debug",
      "jobs": 1
    },
    {
      "name": "CudaDebug",
      "configurePreset": "CudaDebug",
      "jobs": 1
    },

    {
      "name" : "GTEST",
      "configurePreset": "GTEST"
    }
  ],
  "testPresets": [
    {
      "name": "Release",
      "configurePreset": "Release",
      "output": {"outputOnFailure": true},
      "execution": {"noTestsAction": "error", "stopOnFailure": true}
    }
  ]
}
